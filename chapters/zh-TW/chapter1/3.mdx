# Transformersèƒ½åšä»€éº¼ï¼Ÿ

<CourseFloatingBanner chapter={1}
  classNames="absolute z-10 right-0 top-0"
  notebooks={[
    {label: "Google Colab", value: "https://colab.research.google.com/github/huggingface/notebooks/blob/master/course/zh-CN/chapter1/section3.ipynb"},
    {label: "Aws Studio", value: "https://studiolab.sagemaker.aws/import/github/huggingface/notebooks/blob/master/course/zh-CN/chapter1/section3.ipynb"},
]} />

åœ¨æœ¬ç¯€ä¸­ï¼Œæˆ‘å€‘å°‡çœ‹çœ‹ Transformer æ¨¡å‹å¯ä»¥åšä»€éº¼ï¼Œä¸¦ä½¿ç”¨æˆ‘å€‘ä¾†è‡ª ğŸ¤— Transformers å‡½å¼åº«çš„ç¬¬ä¸€å€‹å·¥å…·ï¼špipeline() å‡½æ•¸ã€‚
<Tip>
ğŸ‘€ çœ‹åˆ°å³ä¸Šè§’çš„ <em>åœ¨ Colab ä¸­é–‹å•Ÿ</em>æŒ‰éˆ•äº†å—ï¼Ÿé»æ“Šå®ƒå¯ä»¥é–‹å•Ÿä¸€å€‹åŒ…å«æœ¬ç¯€æ‰€æœ‰ç¨‹å¼ç¢¼ç¯„ä¾‹çš„ Google Colab ç­†è¨˜æœ¬ã€‚ä»»ä½•åŒ…å«ç¨‹å¼ç¢¼ç¯„ä¾‹çš„ç« ç¯€éƒ½æœƒæœ‰é€™å€‹æŒ‰éˆ•ã€‚

å¦‚æœæ‚¨æƒ³åœ¨æœ¬åœ°åŸ·è¡Œé€™äº›ç¯„ä¾‹ï¼Œæˆ‘å€‘å»ºè­°æ‚¨æŸ¥çœ‹è¨­å®šæŒ‡å—<a href="/course/chapter0">æº–å‚™</a>.
</Tip>

## Transformer ç„¡è™•ä¸åœ¨ï¼

Transformer æ¨¡å‹è¢«ç”¨ä¾†è§£æ±ºè·¨ä¸åŒæ¨¡æ…‹çš„å„ç¨®ä»»å‹™ï¼ŒåŒ…æ‹¬è‡ªç„¶èªè¨€è™•ç†ï¼ˆNLPï¼‰ã€é›»è…¦è¦–è¦ºã€éŸ³è¨Šè™•ç†ç­‰ç­‰ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ä½¿ç”¨ Hugging Face å’Œ Transformer æ¨¡å‹çš„å…¬å¸å’Œçµ„ç¹”ï¼Œå®ƒå€‘ä¹Ÿé€éåˆ†äº«æ¨¡å‹å›é¥‹ç¤¾ç¾¤ï¼š

<img src="https://huggingface.co/datasets/huggingface-course/documentation-images/resolve/main/en/chapter1/companies.PNG" alt="ä½¿ç”¨ Hugging Face çš„å…¬å¸" width="100%">

[ğŸ¤— Transformers å‡½å¼åº«](https://github.com/huggingface/transformers)æä¾›äº†å‰µå»ºå’Œä½¿ç”¨é€™äº›å…±äº«æ¨¡å‹çš„åŠŸèƒ½ã€‚[æ¨¡å‹ä¸­å¿ƒï¼ˆhubï¼‰](https://huggingface.co/models)åŒ…å«æ•¸ç™¾è¬å€‹é è¨“ç·´æ¨¡å‹ï¼Œä»»ä½•äººéƒ½å¯ä»¥ä¸‹è¼‰å’Œä½¿ç”¨ã€‚æ‚¨ä¹Ÿå¯ä»¥å°‡è‡ªå·±çš„æ¨¡å‹ä¸Šå‚³åˆ°ä¸­å¿ƒï¼

<Tip>
âš ï¸ Hugging Face Hub ä¸åƒ…é™æ–¼ Transformer æ¨¡å‹ã€‚ä»»ä½•äººéƒ½å¯ä»¥åˆ†äº«ä»–å€‘æƒ³è¦çš„ä»»ä½•é¡å‹çš„æ¨¡å‹æˆ–è³‡æ–™é›†ï¼å‰µå»ºä¸€å€‹ Huggingface.co å¸³æˆ¶(https://huggingface.co/join)ä»¥ä½¿ç”¨æ‰€æœ‰å¯ç”¨åŠŸèƒ½ï¼
</Tip>

åœ¨æ·±å…¥äº†è§£ Transformer æ¨¡å‹çš„å…§éƒ¨é‹ä½œåŸç†ä¹‹å‰ï¼Œè®“æˆ‘å€‘å…ˆçœ‹çœ‹ä¸€äº›ä¾‹å­ï¼Œäº†è§£å®ƒå€‘å¦‚ä½•ç”¨ä¾†è§£æ±ºä¸€äº›æœ‰è¶£çš„è‡ªç„¶èªè¨€è™•ç†å•é¡Œã€‚

## ä½¿ç”¨ç®¡é“ï¼ˆpipelineï¼‰

<iframe width="605" height="320" src="https://www.youtube.com/embed/tiZFewofSLM" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

ğŸ¤— Transformers å‡½å¼åº«ä¸­æœ€åŸºæœ¬çš„ç‰©ä»¶æ˜¯ **pipeline()** å‡½æ•¸ã€‚å®ƒå°‡æ¨¡å‹èˆ‡å…¶å¿…è¦çš„é è™•ç†å’Œå¾Œè™•ç†æ­¥é©Ÿé€£æ¥èµ·ä¾†ï¼Œè®“æˆ‘å€‘èƒ½å¤ ç›´æ¥è¼¸å…¥ä»»ä½•æ–‡æœ¬ä¸¦ç²å¾—å¯ç†è§£çš„ç­”æ¡ˆï¼š

```python
from transformers import pipeline

classifier = pipeline("sentiment-analysis")
classifier("I've been waiting for a HuggingFace course my whole life.")
```
```python out
[{'label': 'POSITIVE', 'score': 0.9598047137260437}]
```

æˆ‘å€‘ç”šè‡³å¯ä»¥å‚³å…¥å¤šå€‹å¥å­ï¼

```python
classifier(
    ["I've been waiting for a HuggingFace course my whole life.", "I hate this so much!"]
)
``` 
```python out
[{'label': 'POSITIVE', 'score': 0.9598047137260437},
 {'label': 'NEGATIVE', 'score': 0.9994558095932007}]
```

é è¨­æƒ…æ³ä¸‹ï¼Œé€™å€‹ç®¡é“ï¼ˆpipelineï¼‰æœƒé¸æ“‡ä¸€å€‹ç‰¹å®šçš„é è¨“ç·´æ¨¡å‹ï¼Œè©²æ¨¡å‹å·²é‡å°è‹±èªæƒ…æ„Ÿåˆ†æé€²è¡Œå¾®èª¿ã€‚ç•¶æ‚¨å‰µå»º **åˆ†é¡å™¨** ç‰©ä»¶æ™‚ï¼Œæ¨¡å‹æœƒè¢«ä¸‹è¼‰ä¸¦å¿«å–ã€‚å¦‚æœæ‚¨é‡æ–°åŸ·è¡ŒæŒ‡ä»¤ï¼Œå°‡ä½¿ç”¨å¿«å–çš„æ¨¡å‹ï¼Œç„¡éœ€å†æ¬¡ä¸‹è¼‰æ¨¡å‹ã€‚

ç•¶æ‚¨å°‡æ–‡æœ¬å‚³éçµ¦ç®¡é“ï¼ˆpipelineï¼‰æ™‚ï¼Œæ¶‰åŠä¸‰å€‹ä¸»è¦æ­¥é©Ÿï¼š

1. æ–‡æœ¬è¢«é è™•ç†æˆæ¨¡å‹èƒ½ç†è§£çš„æ ¼å¼ã€‚
2. é è™•ç†çš„è¼¸å…¥è¢«å‚³éçµ¦æ¨¡å‹ã€‚
3. æ¨¡å‹çš„é æ¸¬çµæœç¶“éå¾Œè™•ç†ï¼Œä»¥ä¾¿æ‚¨èƒ½ç†è§£å®ƒå€‘ã€‚

## ä¸åŒæ¨¡æ…‹çš„å¯ç”¨ç®¡é“

pipeline() å‡½æ•¸æ”¯æ´å¤šç¨®æ¨¡æ…‹ï¼Œè®“æ‚¨èƒ½å¤ è™•ç†æ–‡æœ¬ã€åœ–åƒã€éŸ³è¨Šï¼Œç”šè‡³å¤šæ¨¡æ…‹ä»»å‹™ã€‚åœ¨æœ¬èª²ç¨‹ä¸­æˆ‘å€‘å°‡å°ˆæ³¨æ–¼æ–‡æœ¬ä»»å‹™ï¼Œä½†äº†è§£ transformer æ¶æ§‹çš„æ½›åŠ›æ˜¯æœ‰ç”¨çš„ï¼Œæ‰€ä»¥æˆ‘å€‘å°‡ç°¡è¦æ¦‚è¿°ä¸€ä¸‹ã€‚

ä»¥ä¸‹æ˜¯å¯ç”¨åŠŸèƒ½çš„æ¦‚è¦½ï¼š

<Tip>

å¦‚éœ€å®Œæ•´ä¸”æœ€æ–°çš„ pipeline() åˆ—è¡¨ï¼Œè«‹åƒé–± [ğŸ¤— Transformers æ–‡ä»¶](https://huggingface.co/docs/hub/en/models-tasks)ã€‚

</Tip>

## æ–‡æœ¬ pipeline

* text-generationï¼šå¾æç¤ºç”Ÿæˆæ–‡æœ¬ 
* text-classificationï¼šå°‡æ–‡æœ¬åˆ†é¡åˆ°é å®šç¾©é¡åˆ¥ 
* summarizationï¼šå‰µå»ºæ–‡æœ¬çš„ç°¡çŸ­ç‰ˆæœ¬åŒæ™‚ä¿ç•™é—œéµè³‡è¨Š 
* translationï¼šå°‡æ–‡æœ¬å¾ä¸€ç¨®èªè¨€ç¿»è­¯æˆå¦ä¸€ç¨®èªè¨€ 
* zero-shot-classificationï¼šåœ¨æ²’æœ‰ç‰¹å®šæ¨™ç±¤è¨“ç·´çš„æƒ…æ³ä¸‹åˆ†é¡æ–‡æœ¬ 
* feature-extractionï¼šæå–æ–‡æœ¬çš„å‘é‡è¡¨ç¤º

## åœ–åƒ pipeline

* image-to-textï¼šç”Ÿæˆåœ–åƒçš„æ–‡æœ¬æè¿°
* image-classificationï¼šè­˜åˆ¥åœ–åƒä¸­çš„ç‰©é«”
* object-detectionï¼šå®šä½å’Œè­˜åˆ¥åœ–åƒä¸­çš„ç‰©é«”

## éŸ³è¨Š pipeline

* automatic-speech-recognitionï¼šå°‡èªéŸ³è½‰æ›ç‚ºæ–‡æœ¬
* audio-classificationï¼šå°‡éŸ³è¨Šåˆ†é¡åˆ°é¡åˆ¥
* text-to-speechï¼šå°‡æ–‡æœ¬è½‰æ›ç‚ºèªéŸ³éŸ³è¨Š

## å¤šæ¨¡æ…‹ pipeline

* image-text-to-textï¼šæ ¹æ“šæ–‡æœ¬æç¤ºå›æ‡‰åœ–åƒ

è®“æˆ‘å€‘æ›´è©³ç´°åœ°æ¢ç´¢å…¶ä¸­ä¸€äº›ç®¡é“ï¼

## é›¶æ¨£æœ¬åˆ†é¡

æˆ‘å€‘å°‡å¾è™•ç†ä¸€å€‹æ›´å…·æŒ‘æˆ°æ€§çš„ä»»å‹™é–‹å§‹ï¼Œéœ€è¦å°æœªæ¨™è¨˜çš„æ–‡æœ¬é€²è¡Œåˆ†é¡ã€‚é€™åœ¨ç¾å¯¦ä¸–ç•Œçš„å°ˆæ¡ˆä¸­æ˜¯å¸¸è¦‹çš„æƒ…æ³ï¼Œå› ç‚ºæ¨™è¨»æ–‡æœ¬é€šå¸¸è€—æ™‚ä¸”éœ€è¦é ˜åŸŸå°ˆæ¥­çŸ¥è­˜ã€‚å°æ–¼é€™ç¨®ä½¿ç”¨æƒ…æ³ï¼Œ**é›¶æ¨£æœ¬åˆ†é¡**ç®¡é“éå¸¸å¼·å¤§ï¼šå®ƒå…è¨±æ‚¨æŒ‡å®šç”¨æ–¼åˆ†é¡çš„æ¨™ç±¤ï¼Œå› æ­¤æ‚¨ä¸å¿…ä¾è³´é è¨“ç·´æ¨¡å‹çš„æ¨™ç±¤ã€‚æ‚¨å·²ç¶“çœ‹åˆ°æ¨¡å‹å¦‚ä½•ä½¿ç”¨æ­£é¢æˆ–è² é¢é€™å…©å€‹æ¨™ç±¤å°å¥å­é€²è¡Œåˆ†é¡â€”â€”ä½†å®ƒä¹Ÿå¯ä»¥ä½¿ç”¨æ‚¨å–œæ­¡çš„ä»»ä½•å…¶ä»–æ¨™ç±¤é›†å°æ–‡æœ¬é€²è¡Œåˆ†é¡ã€‚

```python
from transformers import pipeline

classifier = pipeline("zero-shot-classification")
classifier(
    "This is a course about the Transformers library",
    candidate_labels=["education", "politics", "business"],
)
```
```python out
{'sequence': 'This is a course about the Transformers library',
 'labels': ['education', 'business', 'politics'],
 'scores': [0.8445963859558105, 0.111976258456707, 0.043427448719739914]}
```

é€™å€‹ pipeline è¢«ç¨±ç‚ºé›¶æ¨£æœ¬ï¼Œå› ç‚ºæ‚¨ä¸éœ€è¦åœ¨è‡ªå·±çš„æ•¸æ“šä¸Šå¾®èª¿æ¨¡å‹å°±èƒ½ä½¿ç”¨å®ƒã€‚å®ƒå¯ä»¥ç›´æ¥ç‚ºæ‚¨æƒ³è¦çš„ä»»ä½•æ¨™ç±¤åˆ—è¡¨å›å‚³æ¦‚ç‡åˆ†æ•¸ï¼

<Tip>
âœï¸**å¿«ä¾†è©¦è©¦çœ‹ï¼** å˜—è©¦ä½¿ç”¨æ‚¨è‡ªå·±çš„åºåˆ—å’Œæ¨™ç±¤ï¼Œçœ‹çœ‹æ¨¡å‹çš„è¡¨ç¾å¦‚ä½•ã€‚
</Tip>

## æ–‡æœ¬ç”Ÿæˆ

ç¾åœ¨è®“æˆ‘å€‘çœ‹çœ‹å¦‚ä½•ä½¿ç”¨ pipeline ä¾†ç”Ÿæˆä¸€äº›æ–‡æœ¬ã€‚é€™è£¡çš„ä¸»è¦æ¦‚å¿µæ˜¯æ‚¨æä¾›ä¸€å€‹æç¤ºï¼Œæ¨¡å‹æœƒé€éç”Ÿæˆå‰©é¤˜æ–‡æœ¬ä¾†è‡ªå‹•å®Œæˆå®ƒã€‚é€™é¡ä¼¼æ–¼è¨±å¤šæ‰‹æ©Ÿä¸Šçš„é æ¸¬æ–‡æœ¬åŠŸèƒ½ã€‚æ–‡æœ¬ç”Ÿæˆæ¶‰åŠéš¨æ©Ÿæ€§ï¼Œæ‰€ä»¥å¦‚æœæ‚¨æ²’æœ‰å¾—åˆ°èˆ‡ä¸‹é¢é¡¯ç¤ºçš„ç›¸åŒçµæœæ˜¯æ­£å¸¸çš„ã€‚

```python
from transformers import pipeline

generator = pipeline("text-generation")
generator("In this course, we will teach you how to")
```
```python out
[{'generated_text': 'In this course, we will teach you how to understand and use '
                    'data flow and data interchange when handling user data. We '
                    'will be working with one or more of the most commonly used '
                    'data flows â€” data flows of various types, as seen by the '
                    'HTTP'}]
```

æ‚¨å¯ä»¥ä½¿ç”¨åƒæ•¸ **num_return_sequences** æ§åˆ¶ç”Ÿæˆå¤šå°‘å€‹ä¸åŒçš„åºåˆ—ï¼Œä¸¦ä½¿ç”¨åƒæ•¸ **max_length** æ§åˆ¶è¼¸å‡ºæ–‡æœ¬çš„ç¸½é•·åº¦ã€‚

<Tip>
âœï¸**å¿«ä¾†è©¦è©¦çœ‹ï¼** ä½¿ç”¨ num_return_sequences å’Œ max_length åƒæ•¸ç”Ÿæˆå…©å€‹å„ 15 å€‹è©çš„å¥å­ã€‚
</Tip>

## åœ¨ pipeline ä¸­ä½¿ç”¨ Hub ä¸Šçš„ä»»ä½•æ¨¡å‹
å‰é¢çš„ç¯„ä¾‹ä½¿ç”¨äº†æ‰‹é‚Šä»»å‹™çš„é è¨­æ¨¡å‹ï¼Œä½†æ‚¨ä¹Ÿå¯ä»¥å¾ Hub ä¸­é¸æ“‡ç‰¹å®šæ¨¡å‹åœ¨ç®¡é“ä¸­ç”¨æ–¼ç‰¹å®šä»»å‹™ - ä¾‹å¦‚ï¼Œæ–‡æœ¬ç”Ÿæˆã€‚å‰å¾€[æ¨¡å‹ä¸­å¿ƒï¼ˆhubï¼‰](https://huggingface.co/models)ä¸¦é»æ“Šå·¦å´å°æ‡‰çš„æ¨™ç±¤ï¼Œä»¥åƒ…é¡¯ç¤ºè©²ä»»å‹™æ”¯æ´çš„æ¨¡å‹ã€‚æ‚¨æ‡‰è©²æœƒçœ‹åˆ°åƒé€™æ¨£çš„[é é¢](https://huggingface.co/models?pipeline_tag=text-generation)ã€‚

è®“æˆ‘å€‘è©¦è©¦ [**HuggingFaceTB/SmolLM2-360M**](https://huggingface.co/HuggingFaceTB/SmolLM2-360M) æ¨¡å‹ï¼ä»¥ä¸‹æ˜¯å¦‚ä½•åœ¨èˆ‡ä¹‹å‰ç›¸åŒçš„ pipeline ä¸­è¼‰å…¥å®ƒï¼š

```python
from transformers import pipeline

generator = pipeline("text-generation", model="HuggingFaceTB/SmolLM2-360M")
generator(
    "In this course, we will teach you how to",
    max_length=30,
    num_return_sequences=2,
)
```
```python out
[{'generated_text': 'In this course, we will teach you how to manipulate the world and '
                    'move your mental and physical capabilities to your advantage.'},
 {'generated_text': 'In this course, we will teach you how to become an expert and '
                    'practice realtime, and with a hands on experience on both real '
                    'time and real'}]
```

æ‚¨å¯ä»¥é€éé»æ“Šèªè¨€æ¨™ç±¤ä¾†ç²¾ç…‰æ¨¡å‹æœå°‹ï¼Œä¸¦é¸æ“‡ä¸€å€‹èƒ½å¤ ç”Ÿæˆå…¶ä»–èªè¨€æ–‡æœ¬çš„æ¨¡å‹ã€‚æ¨¡å‹ä¸­å¿ƒç”šè‡³åŒ…å«æ”¯æ´å¤šç¨®èªè¨€çš„å¤šèªè¨€æ¨¡å‹æª¢æŸ¥é»ã€‚

ä¸€æ—¦æ‚¨é»æ“Šé¸æ“‡æ¨¡å‹ï¼Œæ‚¨æœƒçœ‹åˆ°æœ‰ä¸€å€‹å°å·¥å…·è®“æ‚¨èƒ½å¤ ç›´æ¥åœ¨ç·šä¸Šè©¦ç”¨å®ƒã€‚é€™æ¨£æ‚¨å¯ä»¥åœ¨ä¸‹è¼‰ä¹‹å‰å¿«é€Ÿæ¸¬è©¦æ¨¡å‹çš„èƒ½åŠ›ã€‚

<Tip>
âœï¸**å¿«ä¾†è©¦è©¦çœ‹ï¼** ä½¿ç”¨ç¯©é¸å™¨æ‰¾åˆ°å¦ä¸€ç¨®èªè¨€çš„æ–‡æœ¬ç”Ÿæˆæ¨¡å‹ã€‚éš¨æ„ä½¿ç”¨å°å·¥å…·ä¸¦åœ¨ pipeline ä¸­ä½¿ç”¨å®ƒï¼
</Tip>

## æ¨ç†æœå‹™æä¾›è€…
æ‰€æœ‰æ¨¡å‹éƒ½å¯ä»¥é€éæ¨ç†æœå‹™æä¾›è€…ç›´æ¥åœ¨ç€è¦½å™¨ä¸­æ¸¬è©¦ï¼Œé€™åœ¨ [Hugging Face ç¶²ç«™](https://huggingface.co/)ä¸Šå¯ç”¨ã€‚æ‚¨å¯ä»¥é€éè¼¸å…¥è‡ªè¨‚æ–‡æœ¬ä¸¦è§€çœ‹æ¨¡å‹è™•ç†è¼¸å…¥æ•¸æ“šï¼Œç›´æ¥åœ¨æ­¤é é¢ä¸Šä½¿ç”¨æ¨¡å‹ã€‚

ç‚ºå°å·¥å…·æä¾›å‹•åŠ›çš„æ¨ç†æœå‹™æä¾›è€…ä¹Ÿä½œç‚ºä»˜è²»ç”¢å“æä¾›ï¼Œå¦‚æœæ‚¨çš„å·¥ä½œæµç¨‹éœ€è¦å®ƒï¼Œé€™æœƒå¾ˆæ–¹ä¾¿ã€‚è«‹åƒé–±[å®šåƒ¹é é¢](https://huggingface.co/pricing)äº†è§£æ›´å¤šè©³æƒ…ã€‚

## é®ç½©å¡«å……

æ‚¨å°‡å˜—è©¦çš„ä¸‹ä¸€å€‹ pipeline æ˜¯ `å¡«å……é®ç½©`ã€‚é€™å€‹ä»»å‹™çš„æ¦‚å¿µæ˜¯å¡«å……çµ¦å®šæ–‡æœ¬ä¸­çš„ç©ºç™½ï¼š

```python
from transformers import pipeline

unmasker = pipeline("fill-mask")
unmasker("This course will teach you all about <mask> models.", top_k=2)
```

```python out
[{'sequence': 'This course will teach you all about mathematical models.',
  'score': 0.19619831442832947,
  'token': 30412,
  'token_str': ' mathematical'},
 {'sequence': 'This course will teach you all about computational models.',
  'score': 0.04052725434303284,
  'token': 38163,
  'token_str': ' computational'}]
```

`top_k` åƒæ•¸æ§åˆ¶æ‚¨æƒ³è¦é¡¯ç¤ºå¤šå°‘ç¨®å¯èƒ½æ€§ã€‚è«‹æ³¨æ„ï¼Œé€™è£¡æ¨¡å‹å¡«å……ç‰¹æ®Šçš„< **mask** >è©å½™ï¼Œé€šå¸¸ç¨±ç‚ºé®ç½©æ¨™è¨˜ã€‚å…¶ä»–é®ç½©å¡«å……æ¨¡å‹å¯èƒ½æœ‰ä¸åŒçš„é®ç½©æ¨™è¨˜ï¼Œæ‰€ä»¥åœ¨æ¢ç´¢å…¶ä»–æ¨¡å‹æ™‚é©—è­‰æ­£ç¢ºçš„é®ç½©è©å½™ç¸½æ˜¯å¥½çš„ã€‚æª¢æŸ¥å®ƒçš„ä¸€ç¨®æ–¹æ³•æ˜¯æŸ¥çœ‹å°å·¥å…·ä¸­ä½¿ç”¨çš„é®ç½©è©å½™ã€‚

<Tip>

âœï¸**å¿«ä¾†è©¦è©¦çœ‹ï¼** åœ¨ Hub ä¸Šæœå°‹åŸºæ–¼ **bert-base-cased** æ¨¡å‹ä¸¦åœ¨æ¨ç† API å°å·¥å…·ä¸­è­˜åˆ¥å…¶é®ç½©è©å½™ã€‚é€™å€‹æ¨¡å‹å°æˆ‘å€‘ä¸Šé¢ **pipeline** ç¯„ä¾‹ä¸­çš„å¥å­é æ¸¬ä»€éº¼ï¼Ÿ

</Tip>

## å‘½åå¯¦é«”è­˜åˆ¥

å‘½åå¯¦é«”è­˜åˆ¥ï¼ˆNERï¼‰æ˜¯ä¸€é …ä»»å‹™ï¼Œæ¨¡å‹å¿…é ˆæ‰¾å‡ºè¼¸å…¥æ–‡æœ¬çš„å“ªäº›éƒ¨åˆ†å°æ‡‰æ–¼å¯¦é«”ï¼Œå¦‚äººç‰©ã€åœ°é»æˆ–çµ„ç¹”ã€‚è®“æˆ‘å€‘çœ‹ä¸€å€‹ä¾‹å­ï¼š

```python
from transformers import pipeline

ner = pipeline("ner", grouped_entities=True)
ner("My name is Sylvain and I work at Hugging Face in Brooklyn.")
```
```python out
[{'entity_group': 'PER', 'score': 0.99816, 'word': 'Sylvain', 'start': 11, 'end': 18}, 
 {'entity_group': 'ORG', 'score': 0.97960, 'word': 'Hugging Face', 'start': 33, 'end': 45}, 
 {'entity_group': 'LOC', 'score': 0.99321, 'word': 'Brooklyn', 'start': 49, 'end': 57}
]
```

é€™è£¡æ¨¡å‹æ­£ç¢ºè­˜åˆ¥äº† Sylvain æ˜¯ä¸€å€‹äººç‰©ï¼ˆPERï¼‰ï¼ŒHugging Face æ˜¯ä¸€å€‹çµ„ç¹”ï¼ˆORGï¼‰ï¼ŒBrooklyn æ˜¯ä¸€å€‹åœ°é»ï¼ˆLOCï¼‰ã€‚

æˆ‘å€‘åœ¨ pipeline å‰µå»ºå‡½æ•¸ä¸­å‚³éé¸é … grouped_entities=True ä¾†å‘Šè¨´ pipeline å°‡å°æ‡‰æ–¼åŒä¸€å¯¦é«”çš„å¥å­éƒ¨åˆ†é‡æ–°çµ„åˆåœ¨ä¸€èµ·ï¼šé€™è£¡æ¨¡å‹æ­£ç¢ºåœ°å°‡ã€ŒHuggingã€å’Œã€ŒFaceã€çµ„åˆç‚ºå–®ä¸€çµ„ç¹”ï¼Œå³ä½¿åç¨±ç”±å¤šå€‹è©å½™çµ„æˆã€‚äº‹å¯¦ä¸Šï¼Œæ­£å¦‚æˆ‘å€‘å°‡åœ¨ä¸‹ä¸€ç« ä¸­çœ‹åˆ°çš„ï¼Œé è™•ç†ç”šè‡³å°‡ä¸€äº›è©å½™åˆ†å‰²æˆæ›´å°çš„éƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼ŒSylvain è¢«åˆ†å‰²æˆå››å€‹ç‰‡æ®µï¼šSã€##ylã€##va å’Œ ##inã€‚åœ¨å¾Œè™•ç†æ­¥é©Ÿä¸­ï¼Œpipeline æˆåŠŸåœ°é‡æ–°çµ„åˆäº†é€™äº›ç‰‡æ®µã€‚

<Tip>
âœï¸**å¿«ä¾†è©¦è©¦çœ‹ï¼** åœ¨æ¨¡å‹ä¸­å¿ƒæœå°‹èƒ½å¤ é€²è¡Œè‹±èªè©æ€§æ¨™è¨»ï¼ˆé€šå¸¸ç¸®å¯«ç‚º POSï¼‰çš„æ¨¡å‹ã€‚é€™å€‹æ¨¡å‹å°ä¸Šé¢ç¯„ä¾‹ä¸­çš„å¥å­é æ¸¬ä»€éº¼ï¼Ÿ
</Tip>

## å•ç­”

å•ç­” pipeline ä½¿ç”¨çµ¦å®šä¸Šä¸‹æ–‡ä¸­çš„è³‡è¨Šä¾†å›ç­”å•é¡Œï¼š

```python
from transformers import pipeline

question_answerer = pipeline("question-answering")
question_answerer(
    question="Where do I work?",
    context="My name is Sylvain and I work at Hugging Face in Brooklyn",
)
```
```python out
{'score': 0.6385916471481323, 'start': 33, 'end': 45, 'answer': 'Hugging Face'}
```

è«‹æ³¨æ„ï¼Œé€™å€‹ pipeline é€éå¾æä¾›çš„ä¸Šä¸‹æ–‡ä¸­æå–è³‡è¨Šä¾†å·¥ä½œï¼›å®ƒä¸æœƒç”Ÿæˆç­”æ¡ˆã€‚

## æ–‡æœ¬æ‘˜è¦

æ–‡æœ¬æ‘˜è¦æ˜¯å°‡æ–‡æœ¬ç¸®æ¸›ç‚ºè¼ƒçŸ­æ–‡æœ¬çš„ä»»å‹™ï¼ŒåŒæ™‚ä¿ç•™æ–‡æœ¬ä¸­æåŠçš„æ‰€æœ‰ï¼ˆæˆ–å¤§éƒ¨åˆ†ï¼‰é‡è¦æ–¹é¢ã€‚ä»¥ä¸‹æ˜¯ä¸€å€‹ä¾‹å­ï¼š

```python
from transformers import pipeline

summarizer = pipeline("summarization")
summarizer(
    """
    America has changed dramatically during recent years. Not only has the number of 
    graduates in traditional engineering disciplines such as mechanical, civil, 
    electrical, chemical, and aeronautical engineering declined, but in most of 
    the premier American universities engineering curricula now concentrate on 
    and encourage largely the study of engineering science. As a result, there 
    are declining offerings in engineering subjects dealing with infrastructure, 
    the environment, and related issues, and greater concentration on high 
    technology subjects, largely supporting increasingly complex scientific 
    developments. While the latter is important, it should not be at the expense 
    of more traditional engineering.

    Rapidly developing economies such as China and India, as well as other 
    industrial countries in Europe and Asia, continue to encourage and advance 
    the teaching of engineering. Both China and India, respectively, graduate 
    six and eight times as many traditional engineers as does the United States. 
    Other industrial countries at minimum maintain their output, while America 
    suffers an increasingly serious decline in the number of engineering graduates 
    and a lack of well-educated engineers.
"""
)
```
```python out
[{'summary_text': ' America has changed dramatically during recent years . The '
                  'number of engineering graduates in the U.S. has declined in '
                  'traditional engineering disciplines such as mechanical, civil '
                  ', electrical, chemical, and aeronautical engineering . Rapidly '
                  'developing economies such as China and India, as well as other '
                  'industrial countries in Europe and Asia, continue to encourage '
                  'and advance engineering .'}]
```

èˆ‡æ–‡æœ¬ç”Ÿæˆä¸€æ¨£ï¼Œæ‚¨å¯ä»¥ç‚ºçµæœæŒ‡å®š **max_length** æˆ– **min_length**ã€‚

## ç¿»è­¯

å°æ–¼ç¿»è­¯ï¼Œå¦‚æœæ‚¨åœ¨ä»»å‹™åç¨±ä¸­æä¾›èªè¨€å°ï¼ˆä¾‹å¦‚ã€Œ**translation_en_to_fr**ã€ï¼‰ï¼Œå‰‡å¯ä»¥ä½¿ç”¨é»˜èªæ¨¡å‹ï¼Œä½†æœ€ç°¡å–®çš„æ–¹æ³•æ˜¯åœ¨[æ¨¡å‹ä¸­å¿ƒï¼ˆhubï¼‰](https://huggingface.co/models)é¸æ“‡è¦ä½¿ç”¨çš„æ¨¡å‹ã€‚é€™è£¡æˆ‘å€‘å°‡å˜—è©¦å¾æ³•èªç¿»è­¯æˆè‹±èªï¼š

```python
from transformers import pipeline

translator = pipeline("translation", model="Helsinki-NLP/opus-mt-fr-en")
translator("Ce cours est produit par Hugging Face.")
```
```python out
[{'translation_text': 'This course is produced by Hugging Face.'}]

```

èˆ‡æ–‡æœ¬ç”Ÿæˆå’Œæ–‡æœ¬æ‘˜è¦ä¸€æ¨£ï¼Œæ‚¨å¯ä»¥æŒ‡å®šçµæœçš„ **max_length** æˆ– **min_length**ã€‚

<Tip>

âœï¸**å¿«ä¾†è©¦è©¦çœ‹ï¼** æœå°‹å…¶ä»–èªè¨€çš„ç¿»è­¯æ¨¡å‹ä¸¦å˜—è©¦å°‡å‰ä¸€å¥è©±ç¿»è­¯æˆå¹¾ç¨®ä¸åŒçš„èªè¨€ã€‚

</Tip>

## åœ–åƒå’ŒéŸ³è¨Š pipeline

é™¤äº†æ–‡æœ¬ä¹‹å¤–ï¼ŒTransformer æ¨¡å‹ä¹Ÿå¯ä»¥è™•ç†åœ–åƒå’ŒéŸ³è¨Šã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ä¾‹å­ï¼š

## åœ–åƒåˆ†é¡

```python
from transformers import pipeline

image_classifier = pipeline(
    task="image-classification", model="google/vit-base-patch16-224"
)
result = image_classifier(
    "https://huggingface.co/datasets/huggingface/documentation-images/resolve/main/pipeline-cat-chonk.jpeg"
)
print(result)
```
```python out
[{'label': 'lynx, catamount', 'score': 0.43350091576576233},
 {'label': 'cougar, puma, catamount, mountain lion, painter, panther, Felis concolor',
  'score': 0.034796204417943954},
 {'label': 'snow leopard, ounce, Panthera uncia',
  'score': 0.03240183740854263},
 {'label': 'Egyptian cat', 'score': 0.02394474856555462},
 {'label': 'tiger cat', 'score': 0.02288915030658245}]
```

## è‡ªå‹•èªéŸ³è­˜åˆ¥

```python
from transformers import pipeline

transcriber = pipeline(
    task="automatic-speech-recognition", model="openai/whisper-large-v3"
)
result = transcriber(
    "https://huggingface.co/datasets/Narsil/asr_dummy/resolve/main/mlk.flac"
)
print(result)
```

## çµåˆå¤šå€‹ä¾†æºçš„æ•¸æ“š

Transformer æ¨¡å‹çš„ä¸€å€‹å¼·å¤§æ‡‰ç”¨æ˜¯å®ƒå€‘èƒ½å¤ çµåˆå’Œè™•ç†ä¾†è‡ªå¤šå€‹ä¾†æºçš„æ•¸æ“šã€‚é€™åœ¨æ‚¨éœ€è¦ä»¥ä¸‹æƒ…æ³æ™‚ç‰¹åˆ¥æœ‰ç”¨ï¼š

1. è·¨å¤šå€‹è³‡æ–™åº«æˆ–å„²å­˜åº«æœå°‹
2. æ•´åˆä¾†è‡ªä¸åŒæ ¼å¼çš„è³‡è¨Šï¼ˆæ–‡æœ¬ã€åœ–åƒã€éŸ³è¨Šï¼‰
3. å‰µå»ºç›¸é—œè³‡è¨Šçš„çµ±ä¸€è¦–åœ–

ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥æ§‹å»ºä¸€å€‹ç³»çµ±ï¼š

* è·¨å¤šç¨®æ¨¡æ…‹ï¼ˆå¦‚æ–‡æœ¬å’Œåœ–åƒï¼‰çš„è³‡æ–™åº«æœå°‹è³‡è¨Šã€‚
* å°‡ä¾†è‡ªä¸åŒä¾†æºçš„çµæœçµåˆæˆå–®ä¸€é€£è²«çš„å›æ‡‰ã€‚ä¾‹å¦‚ï¼Œä¾†è‡ªéŸ³è¨Šæª”æ¡ˆå’Œæ–‡æœ¬æè¿°ã€‚
* å¾æ–‡ä»¶å’Œå…ƒæ•¸æ“šè³‡æ–™åº«ä¸­å‘ˆç¾æœ€ç›¸é—œçš„è³‡è¨Šã€‚

## çµè«–

æœ¬ç« ç¯€å±•ç¤ºçš„ pipeline ä¸»è¦ç”¨æ–¼ç¤ºç¯„ç›®çš„ã€‚å®ƒå€‘æ˜¯ç‚ºç‰¹å®šä»»å‹™ç·¨ç¨‹çš„ï¼Œç„¡æ³•åŸ·è¡Œé€™äº›ä»»å‹™çš„è®ŠåŒ–ã€‚åœ¨ä¸‹ä¸€ç« ä¸­ï¼Œæ‚¨å°‡å­¸ç¿’ **pipeline()** å‡½æ•¸å…§éƒ¨çš„å…§å®¹ä»¥åŠå¦‚ä½•è‡ªè¨‚å…¶è¡Œç‚ºã€‚