# å¦‚æœæˆ‘çš„æ•¸æ“šé›†ä¸åœ¨ Hub ä¸Šæ€éº¼è¾¦ï¼Ÿ

<CourseFloatingBanner chapter={5}
  classNames="absolute z-10 right-0 top-0"
  notebooks={[
    {label: "Google Colab", value: "https://colab.research.google.com/github/huggingface/notebooks/blob/master/course/zh-CN/chapter5/section2.ipynb"},
    {label: "Aws Studio", value: "https://studiolab.sagemaker.aws/import/github/huggingface/notebooks/blob/master/course/zh-CN/chapter5/section2.ipynb"},
]} />

ä½ çŸ¥é“å¦‚ä½•ä½¿ç”¨[Hugging Face Hub](https://huggingface.co/datasets)ä¸‹è¼‰æ•¸æ“šé›†, ä½†ä½ ç¶“å¸¸æœƒç™¼ç¾è‡ªå·±æ­£åœ¨è™•ç†å­˜å„²åœ¨ç­†è¨˜æœ¬é›»è…¦æˆ–é ç¨‹æœå‹™å™¨ä¸Šçš„æ•¸æ“šã€‚åœ¨æœ¬ç¯€ä¸­ï¼Œæˆ‘å€‘å°‡å‘æ‚¨å±•ç¤ºå¦‚ä½•ä½¿ç”¨ ğŸ¤— Datasetsä¾†åŠ è¼‰ Hugging Face Hub ä¸Šä¸å¯ç”¨çš„æ•¸æ“šé›†ã€‚

<Youtube id="HyQgpJTkRdE"/>

## ä½¿ç”¨æœ¬åœ°å’Œé ç¨‹æ•¸æ“šé›†

ğŸ¤— Datasets æä¾›äº†åŠ è¼‰è…³æœ¬ä¾†åŠ è¼‰æœ¬åœ°å’Œé ç¨‹æ•¸æ“šé›†ã€‚å®ƒæ”¯æŒå¹¾ç¨®å¸¸è¦‹çš„æ•¸æ“šæ ¼å¼ï¼Œä¾‹å¦‚ï¼š

|    Data format     | Loading script |                         Example                         |
| :----------------: | :------------: | :-----------------------------------------------------: |
|     CSV & TSV      |     `csv`      |     `load_dataset("csv", data_files="my_file.csv")`     |
|     Text files     |     `text`     |    `load_dataset("text", data_files="my_file.txt")`     |
| JSON & JSON Lines  |     `json`     |   `load_dataset("json", data_files="my_file.jsonl")`    |
| Pickled DataFrames |    `pandas`    | `load_dataset("pandas", data_files="my_dataframe.pkl")` |

å¦‚è¡¨æ‰€ç¤º, å°æ–¼æ¯ç¨®æ•¸æ“šæ ¼å¼, æˆ‘å€‘åªéœ€è¦ä½¿ç”¨ `load_dataset()` å‡½æ•¸, ä½¿ç”¨ `data_files` æŒ‡å®šä¸€å€‹æˆ–å¤šå€‹æ–‡ä»¶çš„è·¯å¾‘çš„åƒæ•¸ã€‚ è®“æˆ‘å€‘å¾æœ¬åœ°æ–‡ä»¶åŠ è¼‰æ•¸æ“šé›†é–‹å§‹ï¼›ç¨å¾Œæˆ‘å€‘å°‡çœ‹åˆ°å¦‚ä½•å°é ç¨‹æ–‡ä»¶åŸ·è¡Œç›¸åŒçš„æ“ä½œã€‚

## åŠ è¼‰æœ¬åœ°æ•¸æ“šé›†

å°æ–¼é€™å€‹ä¾‹å­ï¼Œæˆ‘å€‘å°‡ä½¿ç”¨ [SQuAD-it dataset](https://github.com/crux82/squad-it/), é€™æ˜¯ä¸€å€‹å¤§è¦æ¨¡çš„æ„å¤§åˆ©èªå•ç­”æ•¸æ“šé›†ã€‚

è¨“ç·´å’Œæ¸¬è©¦éƒ½è¨—ç®¡åœ¨ GitHub ä¸Š, å› æ­¤æˆ‘å€‘å¯ä»¥é€šé`wget`å‘½ä»¤éå¸¸ç°¡å–®åœ°ä¸‹è¼‰å®ƒå€‘:

```python
!wget https://github.com/crux82/squad-it/raw/master/SQuAD_it-train.json.gz
!wget https://github.com/crux82/squad-it/raw/master/SQuAD_it-test.json.gz
```

é€™å°‡ä¸‹è¼‰å…©å€‹åç‚º*SQuAD_it-train.json.gz* å’Œ *SQuAD_it-test.json.gz*çš„å£“ç¸®æ–‡ä»¶, æˆ‘å€‘å¯ä»¥ç”¨Linuxçš„è§£å£“å‘½ä»¤ `gzip`:

```python
!gzip -dkv SQuAD_it-*.json.gz
```

```bash
SQuAD_it-test.json.gz:	   87.4% -- replaced with SQuAD_it-test.json
SQuAD_it-train.json.gz:	   82.2% -- replaced with SQuAD_it-train.json
```

æˆ‘å€‘å¯ä»¥çœ‹åˆ°å£“ç¸®æ–‡ä»¶å·²ç¶“è¢«æ›¿æ›ç‚ºSQuAD_it-train.jsonå’ŒSQuAD_it-text.json,ä¸¦ä¸”æ•¸æ“šä»¥ JSON æ ¼å¼å­˜å„²ã€‚

<Tip>

âœ å¦‚æœä½ æƒ³çŸ¥é“ç‚ºä»€éº¼ä¸Šé¢çš„shellå‘½ä»¤ä¸­å–²èˆ‡ä¸€å€‹å­—ç¬¦`!`,é‚£æ˜¯å› ç‚ºæˆ‘å€‘æ˜¯åœ¨ Jupyter notebook ä¸­é‹è¡Œå®ƒå€‘ã€‚å¦‚æœæ‚¨æƒ³åœ¨çµ‚ç«¯ä¸­ä¸‹è¼‰å’Œè§£å£“ç¸®æ•¸æ“šé›†ï¼Œåªéœ€åˆªé™¤å‰ç¶´!å³å¯ã€‚

</Tip>

ä½¿ç”¨`load_dataset()`å‡½æ•¸ä¾†åŠ è¼‰JSONæ–‡ä»¶, æˆ‘å€‘åªéœ€è¦çŸ¥é“æˆ‘å€‘æ˜¯åœ¨è™•ç†æ™®é€šçš„ JSON(é¡ä¼¼æ–¼åµŒå¥—å­—å…¸)é‚„æ˜¯ JSON è¡Œ(è¡Œåˆ†éš”çš„ JSON)ã€‚åƒè¨±å¤šå•ç­”æ•¸æ“šé›†ä¸€æ¨£, SQuAD-it ä½¿ç”¨åµŒå¥—æ ¼å¼,æ‰€æœ‰æ–‡æœ¬éƒ½å­˜å„²åœ¨ `data`æ–‡ä»¶ä¸­ã€‚é€™æ„å‘³è‘—æˆ‘å€‘å¯ä»¥é€šéæŒ‡å®šåƒæ•¸`field`ä¾†åŠ è¼‰æ•¸æ“šé›†,å¦‚ä¸‹æ‰€ç¤º:

```py
from datasets import load_dataset

squad_it_dataset = load_dataset("json", data_files="SQuAD_it-train.json", field="data")
```

é»˜èªæƒ…æ³ä¸‹, åŠ è¼‰æœ¬åœ°æ–‡ä»¶æœƒå‰µå»ºä¸€å€‹å¸¶æœ‰`train`çš„`DatasetDict` å°è±¡ã€‚ æˆ‘å€‘å¯ä»¥é€šé `squad_it_dataset`æŸ¥çœ‹:

```py
squad_it_dataset
```

```python out
DatasetDict({
    train: Dataset({
        features: ['title', 'paragraphs'],
        num_rows: 442
    })
})
```

é€™å‘æˆ‘å€‘é¡¯ç¤ºäº†èˆ‡è¨“ç·´é›†ç›¸é—œè¯çš„è¡Œæ•¸å’Œåˆ—åã€‚æˆ‘å€‘å¯ä»¥é€šéç´¢å¼•åˆ° `train` æŸ¥çœ‹ç¤ºä¾‹ï¼Œå¦‚ä¸‹æ‰€ç¤º:

```py
squad_it_dataset["train"][0]
```

```python out
{
    "title": "Terremoto del Sichuan del 2008",
    "paragraphs": [
        {
            "context": "Il terremoto del Sichuan del 2008 o il terremoto...",
            "qas": [
                {
                    "answers": [{"answer_start": 29, "text": "2008"}],
                    "id": "56cdca7862d2951400fa6826",
                    "question": "In quale anno si Ã¨ verificato il terremoto nel Sichuan?",
                },
                ...
            ],
        },
        ...
    ],
}
```

å¾ˆå¥½, æˆ‘å€‘å·²ç¶“åŠ è¼‰äº†æˆ‘å€‘çš„ç¬¬ä¸€å€‹æœ¬åœ°æ•¸æ“šé›†! ä½†æ˜¯, é›–ç„¶é€™å°è¨“ç·´é›†æœ‰æ•ˆ, ä½†æ˜¯æˆ‘å€‘çœŸæ­£æƒ³è¦çš„æ˜¯åŒ…æ‹¬ `train` å’Œ `test` çš„ `DatasetDict` å°è±¡ã€‚é€™æ¨£çš„è©±å°±å¯ä»¥ä½¿ç”¨ `Dataset.map()` å‡½æ•¸åŒæ™‚è™•ç†è¨“ç·´é›†å’Œæ¸¬è©¦é›†ã€‚ ç‚ºæ­¤, æˆ‘å€‘æä¾›åƒæ•¸`data_files`çš„å­—å…¸,å°‡æ¯å€‹åˆ†å‰²åç¨±æ˜ å°„åˆ°èˆ‡è©²åˆ†å‰²ç›¸é—œè¯çš„æ–‡ä»¶ï¼š

```py
data_files = {"train": "SQuAD_it-train.json", "test": "SQuAD_it-test.json"}
squad_it_dataset = load_dataset("json", data_files=data_files, field="data")
squad_it_dataset
```

```python out
DatasetDict({
    train: Dataset({
        features: ['title', 'paragraphs'],
        num_rows: 442
    })
    test: Dataset({
        features: ['title', 'paragraphs'],
        num_rows: 48
    })
})
```

é€™æ­£æ˜¯æˆ‘å€‘æƒ³è¦çš„ã€‚ç¾åœ¨, ç¾åœ¨ï¼Œæˆ‘å€‘å¯ä»¥æ‡‰ç”¨å„ç¨®é è™•ç†æŠ€è¡“ä¾†æ¸…ç†æ•¸æ“šã€æ¨™è¨˜è©•è«–ç­‰ã€‚

<Tip>

`load_dataset()`å‡½æ•¸çš„`data_files`åƒæ•¸éå¸¸éˆæ´»ä¸¦ä¸”å¯ä»¥æ˜¯å–®å€‹æ–‡ä»¶è·¯å¾‘ã€æ–‡ä»¶è·¯å¾‘åˆ—è¡¨æˆ–å°‡åˆ†å‰²å¾Œçš„åç¨±æ˜ å°„åˆ°æ–‡ä»¶è·¯å¾‘çš„å­—å…¸ã€‚æ‚¨é‚„å¯ä»¥æ ¹æ“šUnix shellä½¿ç”¨çš„è¦å‰‡å°èˆ‡æŒ‡å®šæ¨¡å¼åŒ¹é…çš„æ–‡ä»¶é€²è¡Œå…¨å±€å®šä½ï¼ˆä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥é€šéè¨­ç½®'data_files=â€œ*.JSONâ€'å°‡ç›®éŒ„ä¸­çš„æ‰€æœ‰JSONæ–‡ä»¶ä½œç‚ºå–®å€‹æ‹†åˆ†é€²è¡Œå…¨å±€å®šä½ï¼‰ã€‚æœ‰é—œæ›´å¤šè©³ç´°ä¿¡æ¯ï¼Œè«‹åƒé–±ğŸ¤—Datasets æ–‡æª”ã€‚

</Tip>

ğŸ¤— Datasetså¯¦éš›ä¸Šæ”¯æŒè¼¸å…¥æ–‡ä»¶çš„è‡ªå‹•è§£å£“,æ‰€ä»¥æˆ‘å€‘å¯ä»¥è·³éä½¿ç”¨`gzip`,ç›´æ¥è¨­ç½® `data_files`åƒæ•¸å‚³éå£“ç¸®æ–‡ä»¶:

```py
data_files = {"train": "SQuAD_it-train.json.gz", "test": "SQuAD_it-test.json.gz"}
squad_it_dataset = load_dataset("json", data_files=data_files, field="data")
```

å¦‚æœæ‚¨ä¸æƒ³æ‰‹å‹•è§£å£“ç¸®è¨±å¤š GZIP æ–‡ä»¶ï¼Œé€™æœƒå¾ˆæœ‰ç”¨ã€‚è‡ªå‹•è§£å£“ä¹Ÿé©ç”¨æ–¼å…¶ä»–å¸¸è¦‹æ ¼å¼,å¦‚ ZIP å’Œ TAR,å› æ­¤æ‚¨åªéœ€å°‡ `data_files` è¨­ç½®ç‚ºå£“ç¸®æ–‡ä»¶æ‰€åœ¨çš„è·¯å¾‘,ä½ å°±å¯ä»¥é–‹å§‹äº†!

ç¾åœ¨ä½ çŸ¥é“å¦‚ä½•åœ¨ç­†è¨˜æœ¬é›»è…¦æˆ–è‡ºå¼æ©Ÿä¸ŠåŠ è¼‰æœ¬åœ°æ–‡ä»¶ï¼Œè®“æˆ‘å€‘ä¾†çœ‹çœ‹åŠ è¼‰é ç¨‹æ–‡ä»¶ã€‚

## åŠ è¼‰é ç¨‹æ•¸æ“šé›†

å¦‚æœä½ åœ¨å…¬å¸æ“”ä»»æ•¸æ“šç ”ç©¶å“¡æˆ–ç·¨ç¢¼å“¡,é‚£éº¼ä½ è¦åˆ†æçš„æ•¸æ“šé›†å¾ˆæœ‰å¯èƒ½å­˜å„²åœ¨æŸå€‹é ç¨‹æœå‹™å™¨ä¸Šã€‚å¹¸é‹çš„æ˜¯,åŠ è¼‰é ç¨‹æ–‡ä»¶å°±åƒåŠ è¼‰æœ¬åœ°æ–‡ä»¶ä¸€æ¨£ç°¡å–®!æˆ‘å€‘æ²’æœ‰æä¾›æœ¬åœ°æ–‡ä»¶çš„è·¯å¾‘, è€Œæ˜¯å°‡`load_dataset()`çš„`data_files`åƒæ•¸æŒ‡å‘å­˜å„²é ç¨‹æ–‡ä»¶çš„ä¸€å€‹æˆ–å¤šå€‹URLã€‚ä¾‹å¦‚, å°æ–¼è¨—ç®¡åœ¨ GitHub ä¸Šçš„ SQuAD-it æ•¸æ“šé›†, æˆ‘å€‘å¯ä»¥å°‡ `data_files` æŒ‡å‘ _SQuAD_it-*.json.gz_ çš„ç¶²å€,å¦‚ä¸‹æ‰€ç¤º:

```py
url = "https://github.com/crux82/squad-it/raw/master/"
data_files = {
    "train": url + "SQuAD_it-train.json.gz",
    "test": url + "SQuAD_it-test.json.gz",
}
squad_it_dataset = load_dataset("json", data_files=data_files, field="data")
```

é€™å°‡è¿”å›å’Œä¸Šé¢çš„æœ¬åœ°ä¾‹å­ç›¸åŒçš„ `DatasetDict` å°è±¡, ä½†çœå»äº†æˆ‘å€‘æ‰‹å‹•ä¸‹è¼‰å’Œè§£å£“ _SQuAD_it-*.json.gz_ æ–‡ä»¶çš„æ­¥é©Ÿã€‚é€™æ˜¯æˆ‘å€‘å°åŠ è¼‰æœªè¨—ç®¡åœ¨Hugging Face Hubçš„æ•¸æ“šé›†çš„å„ç¨®æ–¹æ³•çš„ç¸½çµã€‚æ—¢ç„¶æˆ‘å€‘å·²ç¶“æœ‰äº†ä¸€å€‹å¯ä»¥ä½¿ç”¨çš„æ•¸æ“šé›†,è®“æˆ‘å€‘é–‹å§‹å¤§å±•èº«æ‰‹å§ï¼

<Tip>

âœï¸ **è©¦è©¦çœ‹!** é¸æ“‡è¨—ç®¡åœ¨GitHubæˆ–[UCI Machine Learning Repository](https://archive.ics.uci.edu/ml/index.php)ä¸Šçš„å¦ä¸€å€‹æ•¸æ“šé›†ä¸¦å˜—è©¦ä½¿ç”¨ä¸Šè¿°æŠ€è¡“åœ¨æœ¬åœ°å’Œé ç¨‹åŠ è¼‰å®ƒã€‚å¦å¤–,å¯ä»¥å˜—è©¦åŠ è¼‰CSVæˆ–è€…æ–‡æœ¬æ ¼å¼å­˜å„²çš„æ•¸æ“šé›†(æœ‰é—œé€™äº›æ ¼å¼çš„æ›´å¤šä¿¡æ¯,è«‹åƒé–±[æ–‡æª”](https://huggingface.co/docs/datasets/loading#local-and-remote-files))ã€‚

</Tip>


