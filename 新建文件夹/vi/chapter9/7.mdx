# Gi·ªõi thi·ªáu v·ªÅ Gradio Blocks

<DocNotebookDropdown
  classNames="absolute z-10 right-0 top-0"
  options={[
    {label: "Google Colab", value: "https://colab.research.google.com/github/huggingface/notebooks/blob/master/course/vi/chapter9/section7.ipynb"},
    {label: "Aws Studio", value: "https://studiolab.sagemaker.aws/import/github/huggingface/notebooks/blob/master/course/vi/chapter9/section7.ipynb"},
]} />

Trong c√°c ph·∫ßn tr∆∞·ªõc, ch√∫ng ta ƒë√£ t√¨m hi·ªÉu v√† t·∫°o c√°c b·∫£n demo b·∫±ng c√°ch s·ª≠ d·ª•ng l·ªõp `Interface`. Trong ph·∫ßn n√†y, ch√∫ng t√¥i s·∫Ω gi·ªõi thi·ªáu API c·∫•p th·∫•p **m·ªõi ƒë∆∞·ª£c ph√°t tri·ªÉn** c·ªßa m√¨nh c√≥ t√™n l√† `gradio.Blocks`.

B√¢y gi·ªù, s·ª± kh√°c bi·ªát gi·ªØa `Interface` v√† `Blocks`l√† g√¨?

- ‚ö° `Interface`: m·ªôt API c·∫•p cao cho ph√©p b·∫°n t·∫°o m·ªôt b·∫£n demo h·ªçc m√°y ƒë·∫ßy ƒë·ªß ch·ªâ ƒë∆°n gi·∫£n b·∫±ng c√°ch cung c·∫•p danh s√°ch c√°c ƒë·∫ßu v√†o v√† ƒë·∫ßu ra.

- üß± `Blocks`: m·ªôt API c·∫•p th·∫•p cho ph√©p b·∫°n c√≥ to√†n quy·ªÅn ki·ªÉm so√°t c√°c lu·ªìng d·ªØ li·ªáu v√† b·ªë c·ª•c c·ªßa ·ª©ng d·ª•ng c·ªßa m√¨nh. B·∫°n c√≥ th·ªÉ x√¢y d·ª±ng c√°c ·ª©ng d·ª•ng nhi·ªÅu b∆∞·ªõc, r·∫•t ph·ª©c t·∫°p b·∫±ng c√°ch s·ª≠ d·ª•ng `Blocks` (nh∆∞ trong "c√°c kh·ªëi x√¢y d·ª±ng").

### T·∫°i sao l·∫°i l√† Blocks üß±?

Nh∆∞ ch√∫ng ta ƒë√£ th·∫•y trong c√°c ph·∫ßn tr∆∞·ªõc, l·ªõp `Interface` cho ph√©p b·∫°n d·ªÖ d√†ng t·∫°o c√°c b·∫£n demo h·ªçc m√°y ch√≠nh th·ª©c ch·ªâ v·ªõi m·ªôt v√†i d√≤ng m√£. API `Interface` c·ª±c k·ª≥ d·ªÖ s·ª≠ d·ª•ng nh∆∞ng thi·∫øu t√≠nh linh ho·∫°t m√† API `Blocks` cung c·∫•p. V√≠ d·ª•: b·∫°n c√≥ th·ªÉ mu·ªën:

- Nh√≥m c√°c b·∫£n demo c√≥ li√™n quan l·∫°i v·ªõi nhau d∆∞·ªõi d·∫°ng nhi·ªÅu tab trong m·ªôt ·ª©ng d·ª•ng web
- Thay ƒë·ªïi b·ªë c·ª•c c·ªßa b·∫£n demo c·ªßa b·∫°n, v√≠ d·ª•: ƒë·ªÉ ch·ªâ ƒë·ªãnh v·ªã tr√≠ c·ªßa c√°c ƒë·∫ßu v√†o v√† ƒë·∫ßu ra
- C√≥ giao di·ªán nhi·ªÅu b∆∞·ªõc, trong ƒë√≥ ƒë·∫ßu ra c·ªßa m·ªôt m√¥ h√¨nh tr·ªü th√†nh ƒë·∫ßu v√†o cho m√¥ h√¨nh ti·∫øp theo ho·∫∑c c√≥ c√°c lu·ªìng d·ªØ li·ªáu linh ho·∫°t h∆°n n√≥i chung
- Thay ƒë·ªïi thu·ªôc t√≠nh c·ªßa m·ªôt th√†nh ph·∫ßn (v√≠ d·ª•: c√°c l·ª±a ch·ªçn trong danh s√°ch th·∫£ xu·ªëng) ho·∫∑c kh·∫£ nƒÉng hi·ªÉn th·ªã c·ªßa n√≥ d·ª±a tr√™n ƒë·∫ßu v√†o c·ªßa ng∆∞·ªùi d√πng

Ch√∫ng ta s·∫Ω kh√°m ph√° t·∫•t c·∫£ c√°c kh√°i ni·ªám n√†y trong c√°c ph·∫ßn ti·∫øp theo.

### T·∫°o m·ªôt b·∫£n demo ƒë∆°n gi·∫£n b·∫±ng c√°ch s·ª≠ d·ª•ng Blocks

Sau khi b·∫°n ƒë√£ c√†i ƒë·∫∑t Gradio, h√£y ch·∫°y m√£ b√™n d∆∞·ªõi d∆∞·ªõi d·∫°ng t·∫≠p l·ªánh Python, notebook Jupyter ho·∫∑c s·ªï ghi ch√©p Colab.

```py
import gradio as gr


def flip_text(x):
    return x[::-1]


demo = gr.Blocks()

with demo:
    gr.Markdown(
        """
    # Flip Text!
    Start typing below to see the output.
    """
    )
    input = gr.Textbox(placeholder="Flip this text")
    output = gr.Textbox()

    input.change(fn=flip_text, inputs=input, outputs=output)

demo.launch()
```

<iframe src="https://course-demos-flip-text.hf.space" frameBorder="0" height="400" title="Gradio app" class="container p-0 flex-grow space-iframe" allow="accelerometer; ambient-light-sensor; autoplay; battery; camera; document-domain; encrypted-media; fullscreen; geolocation; gyroscope; layout-animations; legacy-image-formats; magnetometer; microphone; midi; oversized-images; payment; picture-in-picture; publickey-credentials-get; sync-xhr; usb; vr ; wake-lock; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-downloads"></iframe>

V√≠ d·ª• ƒë∆°n gi·∫£n ·ªü tr√™n gi·ªõi thi·ªáu 4 kh√°i ni·ªám l√†m n·ªÅn t·∫£ng cho Blocks:

1. Blocks cho ph√©p b·∫°n x√¢y d·ª±ng c√°c ·ª©ng d·ª•ng web k·∫øt h·ª£p markdown, HTML, c√°c n√∫t v√† c√°c th√†nh ph·∫ßn t∆∞∆°ng t√°c ƒë∆°n gi·∫£n b·∫±ng c√°ch kh·ªüi t·∫°o c√°c ƒë·ªëi t∆∞·ª£ng b·∫±ng Python b√™n trong ng·ªØ c·∫£nh `with gradio.Blocks`.

<Tip>
üôãN·∫øu b·∫°n kh√¥ng quen v·ªõi c√¢u l·ªánh `with` trong Python, ch√∫ng t√¥i khuy√™n b·∫°n n√™n xem [h∆∞·ªõng d·∫´n](https://realpython.com/python-with-statement/)  tuy·ªát v·ªùi t·ª´ Real Python. Quay l·∫°i ƒë√¢y sau khi ƒë·ªçc xong ü§ó
</Tip>

Th·ª© t·ª± m√† b·∫°n kh·ªüi t·∫°o c√°c th√†nh ph·∫ßn quan tr·ªçng khi m·ªói ph·∫ßn t·ª≠ ƒë∆∞·ª£c hi·ªÉn th·ªã v√†o ·ª©ng d·ª•ng web theo th·ª© t·ª± n√≥ ƒë∆∞·ª£c t·∫°o. (C√°c b·ªë c·ª•c ph·ª©c t·∫°p h∆°n ƒë∆∞·ª£c th·∫£o lu·∫≠n b√™n d∆∞·ªõi)

2. B·∫°n c√≥ th·ªÉ x√°c ƒë·ªãnh c√°c h√†m Python th√¥ng th∆∞·ªùng ·ªü b·∫•t k·ª≥ ƒë√¢u trong m√£ c·ªßa m√¨nh v√† ch·∫°y ch√∫ng v·ªõi ƒë·∫ßu v√†o c·ªßa ng∆∞·ªùi d√πng b·∫±ng c√°ch s·ª≠ d·ª•ng `Blocks`. Trong v√≠ d·ª• c·ªßa m√¨nh, ch√∫ng ta c√≥ m·ªôt h√†m ƒë∆°n gi·∫£n "l·∫≠t" vƒÉn b·∫£n ƒë·∫ßu v√†o, nh∆∞ng b·∫°n c√≥ th·ªÉ vi·∫øt b·∫•t k·ª≥ h√†m Python n√†o, t·ª´ m·ªôt ph√©p t√≠nh ƒë∆°n gi·∫£n ƒë·∫øn x·ª≠ l√Ω c√°c d·ª± ƒëo√°n t·ª´ m·ªôt m√¥ h√¨nh h·ªçc m√°y.

3. B·∫°n c√≥ th·ªÉ g√°n c√°c s·ª± ki·ªán cho b·∫•t k·ª≥ th√†nh ph·∫ßn `Blocks` n√†o. ƒêi·ªÅu n√†y s·∫Ω ch·∫°y h√†m c·ªßa b·∫°n khi th√†nh ph·∫ßn ƒë∆∞·ª£c nh·∫•p, thay ƒë·ªïi, v.v. Khi b·∫°n g√°n m·ªôt s·ª± ki·ªán, b·∫°n truy·ªÅn v√†o ba tham s·ªë: `fn`: h√†m c·∫ßn ƒë∆∞·ª£c g·ªçi,`inputs`: (danh s√°ch) th√†nh ph·∫ßn ƒë·∫ßu v√†o (s), v√† `outputs`: (danh s√°ch) c√°c th√†nh ph·∫ßn ƒë·∫ßu ra c·∫ßn ƒë∆∞·ª£c g·ªçi.

   Trong v√≠ d·ª• tr√™n, ch√∫ng t√¥i ch·∫°y h√†m `flip_text()` khi gi√° tr·ªã trong `Textbox` c√≥ t√™n ƒë·∫ßu v√†o `input` thay ƒë·ªïi. S·ª± ki·ªán ƒë·ªçc gi√° tr·ªã trong `input`, truy·ªÅn n√≥ l√†m tham s·ªë t√™n cho `flip_text()`, sau ƒë√≥ tr·∫£ v·ªÅ m·ªôt gi√° tr·ªã ƒë∆∞·ª£c g√°n cho `Textbox` th·ª© hai c·ªßa ch√∫ng ta c√≥ t√™n l√† `output`.

   ƒê·ªÉ xem danh s√°ch c√°c s·ª± ki·ªán m√† m·ªói th√†nh ph·∫ßn h·ªó tr·ª£, h√£y xem [t√†i li·ªáu](https://www.gradio.app/docs/) Gradio.

4. C√°c kh·ªëi t·ª± ƒë·ªông t√¨m ra li·ªáu m·ªôt th√†nh ph·∫ßn c√≥ n√™n t∆∞∆°ng t√°c (ch·∫•p nh·∫≠n ƒë·∫ßu v√†o c·ªßa ng∆∞·ªùi d√πng) hay kh√¥ng, d·ª±a tr√™n c√°c tr√¨nh k√≠ch ho·∫°t s·ª± ki·ªán m√† b·∫°n x√°c ƒë·ªãnh. Trong v√≠ d·ª• c·ªßa ch√∫ng ta, h·ªôp vƒÉn b·∫£n ƒë·∫ßu ti√™n l√† t∆∞∆°ng t√°c, v√¨ gi√° tr·ªã c·ªßa n√≥ ƒë∆∞·ª£c s·ª≠ d·ª•ng b·ªüi h√†m `flip_text()`. H·ªôp vƒÉn b·∫£n th·ª© hai kh√¥ng t∆∞∆°ng t√°c, v√¨ gi√° tr·ªã c·ªßa n√≥ kh√¥ng bao gi·ªù ƒë∆∞·ª£c s·ª≠ d·ª•ng l√†m ƒë·∫ßu v√†o. Trong m·ªôt s·ªë tr∆∞·ªùng h·ª£p, b·∫°n c√≥ th·ªÉ mu·ªën ghi ƒë√® ƒëi·ªÅu n√†y, b·∫°n c√≥ th·ªÉ th·ª±c hi·ªán b·∫±ng c√°ch truy·ªÅn m·ªôt boolean ƒë·∫øn tham s·ªë `interactive` c·ªßa th√†nh ph·∫ßn (v√≠ d·ª•:`gr.Textbox(placeholder="Flip this text", interactive=True)`).

### T√πy ch·ªânh b·ªë c·ª•c c·ªßa b·∫£n demo c·ªßa b·∫°n

L√†m c√°ch n√†o ch√∫ng ta c√≥ th·ªÉ s·ª≠ d·ª•ng `Blocks` ƒë·ªÉ t√πy ch·ªânh b·ªë c·ª•c b·∫£n demo c·ªßa m√¨nh? Theo m·∫∑c ƒë·ªãnh, `Blocks` hi·ªÉn th·ªã c√°c th√†nh ph·∫ßn m√† b·∫°n t·∫°o theo chi·ªÅu d·ªçc trong m·ªôt c·ªôt. B·∫°n c√≥ th·ªÉ thay ƒë·ªïi ƒëi·ªÅu ƒë√≥ b·∫±ng c√°ch t·∫°o c√°c c·ªôt b·ªï sung `with gradio.Column():` ho·∫∑c c√°c h√†ng `with gradio.Row():` v√† t·∫°o c√°c th√†nh ph·∫ßn trong c√°c ng·ªØ c·∫£nh ƒë√≥.

ƒê√¢y l√† nh·ªØng g√¨ b·∫°n n√™n ghi nh·ªõ: b·∫•t k·ª≥ th√†nh ph·∫ßn n√†o ƒë∆∞·ª£c t·∫°o trong m·ªôt `Column` (ƒë√¢y c≈©ng l√† m·∫∑c ƒë·ªãnh) s·∫Ω ƒë∆∞·ª£c b·ªë tr√≠ theo chi·ªÅu d·ªçc. B·∫•t k·ª≥ th√†nh ph·∫ßn n√†o ƒë∆∞·ª£c t·∫°o trong m·ªôt `Row` s·∫Ω ƒë∆∞·ª£c b·ªë tr√≠ theo chi·ªÅu ngang, t∆∞∆°ng t·ª± nh∆∞ [m√¥ h√¨nh flexbox trong ph√°t tri·ªÉn web](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Flexible_Box_Layout/Basic_Concept_of_Flexbox).

Cu·ªëi c√πng, b·∫°n c≈©ng c√≥ th·ªÉ t·∫°o c√°c tab cho b·∫£n demo c·ªßa m√¨nh b·∫±ng c√°ch s·ª≠ d·ª•ng tr√¨nh qu·∫£n l√Ω ng·ªØ c·∫£nh `with gradio.Tabs()`. Trong ng·ªØ c·∫£nh n√†y, b·∫°n c√≥ th·ªÉ t·∫°o nhi·ªÅu tab b·∫±ng c√°ch ch·ªâ ƒë·ªãnh `with gradio.TabItem(name_of_tab):` children. B·∫•t k·ª≥ th√†nh ph·∫ßn n√†o ƒë∆∞·ª£c t·∫°o b√™n trong ng·ªØ c·∫£nh `with gradio.TabItem(name_of_tab):` s·∫Ω xu·∫•t hi·ªán trong tab ƒë√≥.

B√¢y gi·ªù, h√£y th√™m m·ªôt h√†m `flip_image()` v√†o b·∫£n demo c·ªßa ch√∫ng ta v√† th√™m m·ªôt tab m·ªõi ƒë·ªÉ l·∫≠t h√¨nh ·∫£nh. D∆∞·ªõi ƒë√¢y l√† m·ªôt v√≠ d·ª• v·ªõi 2 tab v√† c≈©ng s·ª≠ d·ª•ng Row:

```py
import numpy as np
import gradio as gr

demo = gr.Blocks()


def flip_text(x):
    return x[::-1]


def flip_image(x):
    return np.fliplr(x)


with demo:
    gr.Markdown("Flip text or image files using this demo.")
    with gr.Tabs():
        with gr.TabItem("Flip Text"):
            with gr.Row():
                text_input = gr.Textbox()
                text_output = gr.Textbox()
            text_button = gr.Button("Flip")
        with gr.TabItem("Flip Image"):
            with gr.Row():
                image_input = gr.Image()
                image_output = gr.Image()
            image_button = gr.Button("Flip")

    text_button.click(flip_text, inputs=text_input, outputs=text_output)
    image_button.click(flip_image, inputs=image_input, outputs=image_output)

demo.launch()
```

<iframe src="https://course-demos-flip-text-image.hf.space" frameBorder="0" height="450" title="Gradio app" class="container p-0 flex-grow space-iframe" allow="accelerometer; ambient-light-sensor; autoplay; battery; camera; document-domain; encrypted-media; fullscreen; geolocation; gyroscope; layout-animations; legacy-image-formats; magnetometer; microphone; midi; oversized-images; payment; picture-in-picture; publickey-credentials-get; sync-xhr; usb; vr ; wake-lock; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-downloads"></iframe>

B·∫°n s·∫Ω nh·∫≠n th·∫•y r·∫±ng trong v√≠ d·ª• n√†y, ch√∫ng ta c≈©ng ƒë√£ t·∫°o ra m·ªôt th√†nh ph·∫ßn `Button` trong m·ªói tab v√† ch·ªâ ƒë·ªãnh m·ªôt s·ª± ki·ªán nh·∫•p chu·ªôt cho m·ªói n√∫t, ƒë√≥ l√† nh·ªØng g√¨ th·ª±c s·ª± ch·∫°y h√†m.

### Kh√°m ph√° c√°c s·ª± ki·ªán v√† tr·∫°ng th√°i

C≈©ng gi·ªëng nh∆∞ b·∫°n c√≥ th·ªÉ ki·ªÉm so√°t b·ªë c·ª•c, `Blocks` cung c·∫•p cho b·∫°n kh·∫£ nƒÉng ki·ªÉm so√°t chi ti·∫øt ƒë·ªëi v·ªõi nh·ªØng s·ª± ki·ªán n√†o k√≠ch ho·∫°t h√†m g·ªçi. M·ªói th√†nh ph·∫ßn v√† nhi·ªÅu b·ªë c·ª•c c√≥ c√°c s·ª± ki·ªán c·ª• th·ªÉ m√† ch√∫ng h·ªó tr·ª£.

V√≠ d·ª•: th√†nh ph·∫ßn `Textbox` c√≥ 2 s·ª± ki·ªán: `change()` (khi gi√° tr·ªã b√™n trong h·ªôp vƒÉn b·∫£n thay ƒë·ªïi) v√† `submit()` (khi ng∆∞·ªùi d√πng nh·∫•n ph√≠m enter trong khi t·∫≠p trung v√†o h·ªôp vƒÉn b·∫£n). C√°c th√†nh ph·∫ßn ph·ª©c t·∫°p h∆°n c√≥ th·ªÉ c√≥ nhi·ªÅu s·ª± ki·ªán h∆°n n·ªØa: v√≠ d·ª•: th√†nh ph·∫ßn `Audio` c≈©ng c√≥ c√°c s·ª± ki·ªán ri√™ng bi·ªát khi t·ªáp √¢m thanh ƒë∆∞·ª£c ph√°t, x√≥a, t·∫°m d·ª´ng, v.v. Xem t√†i li·ªáu v·ªÅ c√°c s·ª± ki·ªán m√† m·ªói th√†nh ph·∫ßn h·ªó tr·ª£.

B·∫°n c√≥ th·ªÉ ƒë√≠nh k√®m tr√¨nh k√≠ch ho·∫°t s·ª± ki·ªán cho kh√¥ng, m·ªôt ho·∫∑c nhi·ªÅu s·ª± ki·ªán n√†y. B·∫°n t·∫°o m·ªôt tr√¨nh k√≠ch ho·∫°t s·ª± ki·ªán b·∫±ng c√°ch g·ªçi t√™n c·ªßa s·ª± ki·ªán tr√™n c√° th·ªÉ th√†nh ph·∫ßn d∆∞·ªõi d·∫°ng m·ªôt h√†m - v√≠ d·ª•: `textbox.change(...)` ho·∫∑c `btn.click(...)`. H√†m nh·∫≠n ba tham s·ªë, nh∆∞ ƒë√£ th·∫£o lu·∫≠n ·ªü tr√™n:

- `fn`: h√†m ƒë·ªÉ ch·∫°y
- `input`: m·ªôt (danh s√°ch) (c√°c) th√†nh ph·∫ßn c√≥ gi√° tr·ªã s·∫Ω ƒë∆∞·ª£c cung c·∫•p l√†m tham s·ªë ƒë·∫ßu v√†o cho h√†m. Gi√° tr·ªã c·ªßa m·ªói th√†nh ph·∫ßn ƒë∆∞·ª£c √°nh x·∫° t·ªõi tham s·ªë h√†m t∆∞∆°ng ·ª©ng, theo th·ª© t·ª±. Tham s·ªë n√†y c√≥ th·ªÉ l√† None n·∫øu h√†m kh√¥ng nh·∫≠n b·∫•t k·ª≥ tham s·ªë n√†o.
- `outputs`: m·ªôt (danh s√°ch) (c√°c) th√†nh ph·∫ßn c√≥ gi√° tr·ªã c·∫ßn ƒë∆∞·ª£c c·∫≠p nh·∫≠t d·ª±a tr√™n c√°c gi√° tr·ªã ƒë∆∞·ª£c tr·∫£ v·ªÅ b·ªüi h√†m. M·ªói gi√° tr·ªã tr·∫£ v·ªÅ ƒë·∫∑t gi√° tr·ªã c·ªßa th√†nh ph·∫ßn t∆∞∆°ng ·ª©ng, theo th·ª© t·ª±. Tham s·ªë n√†y c√≥ th·ªÉ l√† None n·∫øu h√†m kh√¥ng tr·∫£ v·ªÅ b·∫•t k·ª≥ th·ª© g√¨.

B·∫°n th·∫≠m ch√≠ c√≥ th·ªÉ ƒë·∫∑t th√†nh ph·∫ßn ƒë·∫ßu v√†o v√† ƒë·∫ßu ra l√† th√†nh ph·∫ßn gi·ªëng nhau, nh∆∞ ch√∫ng ta l√†m trong v√≠ d·ª• n√†y s·ª≠ d·ª•ng m√¥ h√¨nh GPT ƒë·ªÉ ho√†n th√†nh vƒÉn b·∫£n:

```py
import gradio as gr

api = gr.Interface.load("huggingface/EleutherAI/gpt-j-6B")


def complete_with_gpt(text):
    # S·ª≠ d·ª•ng 50 k√≠ t·ª± cu·ªëi c·ªßa vƒÉn b·∫£n l√†m ng·ªØ c·∫£nh
    return text[:-50] + api(text[-50:])


with gr.Blocks() as demo:
    textbox = gr.Textbox(placeholder="Type here and press enter...", lines=4)
    btn = gr.Button("Generate")

    btn.click(complete_with_gpt, textbox, textbox)

demo.launch()
```

<iframe src="https://course-demos-blocks-gpt.hf.space" frameBorder="0" height="300" title="Gradio app" class="container p-0 flex-grow space-iframe" allow="accelerometer; ambient-light-sensor; autoplay; battery; camera; document-domain; encrypted-media; fullscreen; geolocation; gyroscope; layout-animations; legacy-image-formats; magnetometer; microphone; midi; oversized-images; payment; picture-in-picture; publickey-credentials-get; sync-xhr; usb; vr ; wake-lock; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-downloads"></iframe>

### T·∫°o b·∫£n demo ƒëa b∆∞·ªõc

Trong m·ªôt s·ªë tr∆∞·ªùng h·ª£p, b·∫°n c√≥ th·ªÉ mu·ªën c√≥ _b·∫£n demo ƒëa b∆∞·ªõc_, trong ƒë√≥ b·∫°n s·ª≠ d·ª•ng l·∫°i ƒë·∫ßu ra c·ªßa m·ªôt h√†m l√†m ƒë·∫ßu v√†o cho h√†m ti·∫øp theo. ƒêi·ªÅu n√†y th·ª±c s·ª± d·ªÖ th·ª±c hi·ªán v·ªõi `Blocks`, v√¨ b·∫°n c√≥ th·ªÉ s·ª≠ d·ª•ng m·ªôt th√†nh ph·∫ßn cho ƒë·∫ßu v√†o c·ªßa m·ªôt tr√¨nh k√≠ch ho·∫°t s·ª± ki·ªán nh∆∞ng l·∫°i l√† ƒë·∫ßu ra c·ªßa m·ªôt th√†nh ph·∫ßn kh√°c. H√£y xem th√†nh ph·∫ßn vƒÉn b·∫£n trong v√≠ d·ª• b√™n d∆∞·ªõi, gi√° tr·ªã c·ªßa n√≥ l√† k·∫øt qu·∫£ ƒë·∫ßu ra c·ªßa m√¥ h√¨nh nh·∫≠n d·∫°ng gi·ªçng n√≥i, nh∆∞ng c≈©ng ƒë∆∞·ª£c truy·ªÅn v√†o m√¥ h√¨nh ph√¢n t√≠ch t√¨nh c·∫£m:

```py
from transformers import pipeline

import gradio as gr

asr = pipeline("automatic-speech-recognition", "facebook/wav2vec2-base-960h")
classifier = pipeline("text-classification")


def speech_to_text(speech):
    text = asr(speech)["text"]
    return text


def text_to_sentiment(text):
    return classifier(text)[0]["label"]


demo = gr.Blocks()

with demo:
    audio_file = gr.Audio(type="filepath")
    text = gr.Textbox()
    label = gr.Label()

    b1 = gr.Button("Recognize Speech")
    b2 = gr.Button("Classify Sentiment")

    b1.click(speech_to_text, inputs=audio_file, outputs=text)
    b2.click(text_to_sentiment, inputs=text, outputs=label)

demo.launch()
```

<iframe src="https://course-demos-blocks-multi-step.hf.space" frameBorder="0" height="600" title="Gradio app" class="container p-0 flex-grow space-iframe" allow="accelerometer; ambient-light-sensor; autoplay; battery; camera; document-domain; encrypted-media; fullscreen; geolocation; gyroscope; layout-animations; legacy-image-formats; magnetometer; microphone; midi; oversized-images; payment; picture-in-picture; publickey-credentials-get; sync-xhr; usb; vr ; wake-lock; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-downloads"></iframe>

### C·∫≠p nh·∫≠t Thu·ªôc t√≠nh Th√†nh ph·∫ßn

Cho ƒë·∫øn nay, ch√∫ng ta ƒë√£ th·∫•y c√°ch t·∫°o c√°c s·ª± ki·ªán ƒë·ªÉ c·∫≠p nh·∫≠t gi√° tr·ªã c·ªßa m·ªôt th√†nh ph·∫ßn kh√°c. Nh∆∞ng ƒëi·ªÅu g√¨ s·∫Ω x·∫£y ra n·∫øu b·∫°n mu·ªën thay ƒë·ªïi c√°c thu·ªôc t√≠nh kh√°c c·ªßa m·ªôt th√†nh ph·∫ßn, nh∆∞ kh·∫£ nƒÉng hi·ªÉn th·ªã c·ªßa h·ªôp vƒÉn b·∫£n ho·∫∑c c√°c l·ª±a ch·ªçn trong nh√≥m n√∫t radio? B·∫°n c√≥ th·ªÉ th·ª±c hi·ªán vi·ªác n√†y b·∫±ng c√°ch tr·∫£ v·ªÅ ph∆∞∆°ng th·ª©c `update()` c·ªßa l·ªõp th√†nh ph·∫ßn thay v√¨ gi√° tr·ªã tr·∫£ v·ªÅ th√¥ng th∆∞·ªùng t·ª´ h√†m c·ªßa b·∫°n.

ƒêi·ªÅu n√†y ƒë∆∞·ª£c minh h·ªça d·ªÖ d√†ng nh·∫•t b·∫±ng m·ªôt v√≠ d·ª•:

```py
import gradio as gr


def change_textbox(choice):
    if choice == "short":
        return gr.Textbox.update(lines=2, visible=True)
    elif choice == "long":
        return gr.Textbox.update(lines=8, visible=True)
    else:
        return gr.Textbox.update(visible=False)


with gr.Blocks() as block:
    radio = gr.Radio(
        ["short", "long", "none"], label="What kind of essay would you like to write?"
    )
    text = gr.Textbox(lines=2, interactive=True)

    radio.change(fn=change_textbox, inputs=radio, outputs=text)
    block.launch()
```

<iframe src="https://course-demos-blocks-update-component-properti-833c723.hf.space" frameBorder="0" height="300" title="Gradio app" class="container p-0 flex-grow space-iframe" allow="accelerometer; ambient-light-sensor; autoplay; battery; camera; document-domain; encrypted-media; fullscreen; geolocation; gyroscope; layout-animations; legacy-image-formats; magnetometer; microphone; midi; oversized-images; payment; picture-in-picture; publickey-credentials-get; sync-xhr; usb; vr ; wake-lock; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-downloads"></iframe>

Ch√∫ng ta v·ª´a kh√°m ph√° t·∫•t c·∫£ c√°c kh√°i ni·ªám c·ªët l√µi c·ªßa `Blocks`! C≈©ng gi·ªëng nh∆∞ v·ªõi `Interfaces`, b·∫°n c√≥ th·ªÉ t·∫°o c√°c b·∫£n demo th√∫ v·ªã c√≥ th·ªÉ ƒë∆∞·ª£c chia s·∫ª b·∫±ng c√°ch s·ª≠ d·ª•ng `share=True` trong ph∆∞∆°ng th·ª©c `launch()` ho·∫∑c tri·ªÉn khai tr√™n [Hugging Face Spaces](https://huggingface.co/spaces).
